(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{104:function(t,e,n){},107:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),r=n(29),u=n.n(r),i=(n(60),n(4)),s=n(48),o=n.n(s),l=n(10),j=n(16),b=n(25),d=n.n(b),f=n(1),h=function(){return Object(f.jsxs)("nav",{children:[Object(f.jsx)(j.b,{exact:!0,to:"/",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Home"}),Object(f.jsx)(j.b,{exact:!0,to:"/contacts",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Phonebook"}),Object(f.jsx)("hr",{})]})},p=n(22),v=n.n(p);function O(){return Object(f.jsxs)("div",{className:v.a.nav__container,children:[Object(f.jsx)(j.b,{to:"/signup",className:v.a.navLink,activeClassName:v.a.activeLink,children:"SignUp"}),Object(f.jsx)(j.b,{to:"/login",className:v.a.navLink,activeClassName:v.a.activeLink,children:"LogIn"})]})}var x=n(32),_=n.n(x),g=n(20),k=n(17);function m(){var t=Object(l.b)(),e=Object(l.c)(g.b);return Object(f.jsxs)("div",{className:_.a.user__container,children:[Object(f.jsxs)("span",{className:_.a.greeting__title,children:["Welcome, ",e,"!"]}),Object(f.jsx)("button",{type:"button",className:_.a.logout__btn,onClick:function(){return t(Object(k.c)())},children:"LogOut"})]})}var L=n(51),y=n.n(L);function N(){var t=Object(l.c)(g.a);return Object(f.jsxs)("header",{className:y.a.header__style,children:[Object(f.jsx)(h,{}),t?Object(f.jsx)(m,{}):Object(f.jsx)(O,{})]})}var w=function(t){var e=t.children;return Object(f.jsx)("div",{children:e})},C=(n(104),n(21)),W=n(31),I=["children"];function V(t){var e=t.children,n=Object(W.a)(t,I),a=Object(l.c)(g.a);return Object(f.jsx)(i.b,Object(C.a)(Object(C.a)({},n),{},{children:a?e:Object(f.jsx)(i.a,{to:"/login"})}))}var z=["children","restricted"];function A(t){var e=t.children,n=t.restricted,a=void 0!==n&&n,c=Object(W.a)(t,z),r=Object(l.c)(g.a)&&a;return console.log(r),Object(f.jsx)(i.b,Object(C.a)(Object(C.a)({},c),{},{children:r?Object(f.jsx)(i.a,{to:"/"}):e}))}var M=Object(a.lazy)((function(){return n.e(0).then(n.bind(null,116))})),S=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,117))})),U=Object(a.lazy)((function(){return n.e(1).then(n.bind(null,118))})),Z=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,112))}));function B(){var t=Object(l.b)();return Object(a.useEffect)((function(){t(Object(k.a)())}),[t]),Object(f.jsxs)("div",{className:"Container",children:[Object(f.jsx)(N,{}),Object(f.jsx)(w,{children:Object(f.jsx)(a.Suspense,{fallback:Object(f.jsx)(o.a,{}),children:Object(f.jsxs)(i.d,{children:[Object(f.jsx)(A,{exact:!0,path:"/",children:Object(f.jsx)(M,{})}),Object(f.jsx)(V,{path:"/contacts",children:Object(f.jsx)(Z,{})}),Object(f.jsx)(A,{exact:!0,path:"/signup",restricted:!0,children:Object(f.jsx)(S,{})}),Object(f.jsx)(A,{exact:!0,path:"/login",restricted:!0,children:Object(f.jsx)(U,{})})]})})})]})}var E,F,H=n(6),J=n(5),R=n(14),X=n(55),q=n(26),P=n(37),Q=Object(J.d)([],(E={},Object(R.a)(E,q.b.fulfilled,(function(t,e){return e.payload})),Object(R.a)(E,q.a.fulfilled,(function(t,e){var n=e.payload;return[].concat(Object(X.a)(t),[n])})),Object(R.a)(E,q.c.fulfilled,(function(t,e){var n=e.payload;t.filter((function(t){return t.id!==n}))})),E)),D=Object(J.d)("",Object(R.a)({},P.a,(function(t,e){return e.payload}))),G=Object(J.e)({name:"auth",initialState:{user:{name:"",email:""},token:"",isLoggedIn:!1},extraReducers:(F={},Object(R.a)(F,k.d.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(R.a)(F,k.b.fulfilled,(function(t,e){var n=e.payload;t.user=n.user,t.token=n.token,t.isLoggedIn=!0})),Object(R.a)(F,k.c.fulfilled,(function(t,e){t.user={name:"",email:""},t.token="",t.isLoggedIn=!1})),Object(R.a)(F,k.a.fulfilled,(function(t,e){var n=e.payload;t.user=n,t.isLoggedIn=!0})),F)}).reducer,K=n(52),T=n.n(K),Y=n(19),$=n(53),tt={key:"auth",storage:n.n($).a,whitelist:["token"]},et=Object(H.b)({contactList:Q,contactFilter:D}),nt=Object(J.a)({reducer:{auth:Object(Y.g)(tt,G),contacts:et},middleware:function(t){return t({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}}).concat(T.a)}}),at=Object(Y.h)(nt),ct=n(54);u.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(l.a,{store:nt,children:Object(f.jsx)(ct.a,{persistor:at,loading:null,children:Object(f.jsx)(j.a,{children:Object(f.jsx)(B,{})})})})}),document.getElementById("root"))},17:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return h}));var a=n(7),c=n.n(a),r=n(18),u=n(15),i=n.n(u),s=n(5),o="https://connections-api.herokuapp.com",l=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){i.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("".concat(o,"/users/signup"),e);case 4:return r=t.sent,u=r.data,l(u.token),t.abrupt("return",u);case 10:t.prev=10,t.t0=t.catch(1),a(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),d=Object(s.c)("auth/login",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("".concat(o,"/users/login"),e);case 4:return r=t.sent,u=r.data,l(u.token),t.abrupt("return",u);case 10:t.prev=10,t.t0=t.catch(1),a(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(s.c)("auth/logout",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("".concat(o,"/users/logout"));case 4:j(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),h=Object(s.c)("auth/refresh",function(){var t=Object(r.a)(c.a.mark((function t(e,n,a){var r,u,s,o,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.rejectWithValue,u=n.getState(),""!==(s=u.auth.token)){t.next=6;break}return console.log("No token"),t.abrupt("return",n.rejectWithValue());case 6:return l(s),t.prev=7,t.next=10,i.a.get("/users/current");case 10:return o=t.sent,j=o.data,t.abrupt("return",j);case 15:t.prev=15,t.t0=t.catch(7),r(t.t0);case 18:case"end":return t.stop()}}),t,null,[[7,15]])})));return function(e,n,a){return t.apply(this,arguments)}}())},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var a=function(t){return t.auth.isLoggedIn},c=function(t){return t.auth.user.name}},22:function(t,e,n){t.exports={navLink:"AuthNav_navLink__1FZ1a",activeNavLink:"AuthNav_activeNavLink__ZE7yM",nav__container:"AuthNav_nav__container__1vMuZ"}},25:function(t,e,n){t.exports={navLink:"Navigation_navLink___FiXb",activeNavLink:"Navigation_activeNavLink__2dQuH"}},26:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return j}));var a=n(7),c=n.n(a),r=n(18),u=n(15),i=n.n(u),s=n(5);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=Object(s.c)("contacts/addContacts",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/contacts",e);case 4:return r=t.sent,u=r.data,t.abrupt("return",u);case 9:t.prev=9,t.t0=t.catch(1),a(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),l=Object(s.c)("contacts/fetchContacts",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.get("/contacts");case 4:return r=t.sent,u=r.data,t.abrupt("return",u);case 9:t.prev=9,t.t0=t.catch(1),a(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(s.c)("contacts/removeContact",function(){var t=Object(r.a)(c.a.mark((function t(e,n){var a,r,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.rejectWithValue,t.prev=1,t.next=4,i.a.delete("/contacts/".concat(e));case 4:return r=t.sent,u=r.data.id,t.abrupt("return",u);case 9:t.prev=9,t.t0=t.catch(1),a(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}())},32:function(t,e,n){t.exports={user__container:"UserMenu_user__container__Ufilq",logout__btn:"UserMenu_logout__btn__ZNavM"}},37:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(5),c=Object(a.b)("contact/filter")},51:function(t,e,n){t.exports={header__style:"AppBar_header__style__XSbLe"}},60:function(t,e,n){}},[[107,4,6]]]);
//# sourceMappingURL=main.8271e54d.chunk.js.map